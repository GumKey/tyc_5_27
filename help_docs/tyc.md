


***********************************************tyc_spider文件说明************************************************

tyc_url_rawler文件夹中文件：爬取公司的number
tyc_json_crawler文件中文件：爬取公司的json信息（不包括基本信息）
tyc_jbxx_crawler文件：
	1、url_proxy：获取代理的方法get_proxy
				  获取公司名字和number的方法get_url	
				  将jbxx_html.py中获得的数据导入数据库的方法put_db
	2、jbxx_html:导入url_proxy中的方法获取公司信息 ，代理ip(代理ip改为在文件中手动写入，不更换)，及写入数据库方法
				 （注：公司信息及代理ip获取方式可在url_proxy中更改）
				 
*****************************************************************************************************************

***********************************************
9000

jbxx:6000 > 服务器、  3000-5000：L， 0-5000：K
json:4000:already, 4000+；go on, 7000+服务器

4000
not sure:

4000
number:

************************************************




******************自定义requests保证返回200：*********************

一、说明

1、error:返回的json内容不正确（基本信息需要登陆）

2、页面非json:跳转到其他网页(如什么游戏的网页之类)，代理IP异常，还代理ip迭代处理

3、dataerror: 返回为json内容，但没有state这个键值（信息不存在）

4、[] :返回为json，state=ok,data=空值（信息不存在）      
                                                  
5、data:返回正确内容 （信息存在）




二、处理

                                                 无state  
                                               (dataerror)
                                                    |
                                                    |
													|
							
请求页面 ----------------> 返回200 ------------> 页面json ---------> state='ok'(正确内容)

     |			     		 |                      |
     |                       |                      |
     |                       |                      |

其他返回（迭代处理）     页面非json            state='error'||'warn'    
（自定义request）        （迭代爬取）             (error||'warn')


三、结果

1、网站备案，返回501后再处理异常（查看是否存在信息）
2、基本信息需要登录爬取


四、结果处理

1、6月8日数据处理：
	a、14621条公司爬取到number
	b、已爬取的4369条信息，不能保证数据完整性
	c、尚在爬取的数据已有一千条左右，其中四百多条与已有的4369条重复
	d、将14621条中除去4369条后，剩下的数据重新入库
	e、将能保持完整的数据，从14621条中数据排除,从已有的4369条中排除
	f、优先爬取14621条中除去4369条下的数据
	g、将剩余的未爬取到number的公司筛选出来，重新爬取number
	
	
2、6月8日数据库说明：
	test15->fq_provider      全部16000条左右公司数据
	test15->tyc_10_c         1000条与14000条对比剩下的数据（带number）
	tets15->tyc_10_c1        1000条加上4000条与14000条对比剩下的数据（带number）
	test15->number_name      未爬取到number的公司数据
	tyc->company_cons	     之前爬取的4000条数据
	tyc->tyc_10_6            已爬取的1000条完整性较高的数据
	tyc->tyc_url             爬取到number的14000条左右数据
	
五、难点

1、问题：基本信息一栏内容返回的json数据和页面显示的数据除了公司名字，其他都不一致。
   解决：通过带token和utm的cookies进行访问，token和utm通过分析js文件，模拟js操作得到。
    